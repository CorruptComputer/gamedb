#!/bin/bash

CMD=${1:-"frontend"}

nodemon \
  --signal SIGHUP \
  --exec "cd ./cmd/$CMD/ && go build -ldflags \"-X main.version=$(git rev-parse --verify HEAD) -X main.commits=$(git rev-list --count master)\" && ./$CMD" \
  "*.go"

rm ./cmd/"$CMD"/"$CMD"
